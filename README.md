# norm2matrix
Cloudcompareで傾いた点群を補正する.

Convert normal vector to transformation matrix. Height Direction (Z-axis) Tilt Correction in CloudCompare.

# Background
SLAMで生成した点群地図が高さ方向に歪み、傾いてしまうのでXY平面に平行になるようにCloudcompareで補正する必要があった.

The point cloud map generated by SLAM was distorted and tilted in the height (Z) direction, so it needed to be corrected in CloudCompare to align parallel with the XY plane.
<img src="https://github.com/user-attachments/assets/80e67ca5-7fb3-4327-9ad0-a71c81a4ac59" width="1000">

Cloudcompareでは平面を近似する機能があり、法線ベクトルが表示される.

CloudCompare has a feature for approximating planes, which displays the normal vector.

<div align="center">
  <img src="https://github.com/user-attachments/assets/f2fc7960-a695-4ab5-b91c-b3e47e26ed22" width="700">
</div>

法線ベクトルから変換行列を求め、XY平面と近似平面を一致させて傾きを補正する.

Calculate the transformation matrix from the normal vector and correct the tilt by aligning the XY plane with the approximated plane.

# Prerequisites
- python3
- numpy
# Usage
```
git clone https://github.com/ngtroku/norm2matrix.git
cd ./norm2matrix
python ./norm2matrix.py nx ny nz
```
## Example
```
python ./norm2matrix.py 0.039752 0.159212 0.986444
```
